/*
 * Copyright 2010-2013 icl-network.com. All rights reserved.
 * Support: http://www.icl-network.com
 *
 * JavaScript - Borrowing RepaymentRecord List
 * Version: 3.0
 */
$().ready(function() {
    
		var $batchRepayButton = $("a.batchRepay");
	var $selectedRows = null;
	$batchRepayButton.click(function(e) {
		e.preventDefault();
	
		$selectedRows = $("table.dataTable td.tableCheckbox input.selectRow:checked");
		
		if ($selectedRows.length) {
			$.colorbox({
				initialHeight: "0",
				initialWidth: "0",
				opacity: "0.3",
				href: ".batchRepayConfirmDialog",
				inline: true,
				closeButton: false
			});
		}
		else {
			$.globalMessenger().post({id: "needSelectRows", type: "error", message: "请选择需要批量还款的还款记录", showCloseButton: true });
		}
		
	});
	
	var $confirmYes = $("div.batchRepayConfirmDialog a.confirmYes");
	if($confirmYes.length) {
		$confirmYes.click(function(e) {
			e.preventDefault();
			
			var $this = $(this);
			$this.attr("disabled", true);
			
			if($selectedRows.length) {
				window.location.href = $batchRepayButton.prop("href") + "&" + $selectedRows.serialize();
			}
			
		});
	}

	var $confirmNo = $("div.batchRepayConfirmDialog a.confirmNo");
	if($confirmNo.length) {
		$confirmNo.click(function(e) {
			e.preventDefault();
			
			$(".deleteConfirmDialog").colorbox.close();
		});
	}
	
});
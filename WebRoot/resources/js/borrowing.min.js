/*
 * Copyright 2010-2013 icl-network.com. All rights reserved.
 * Support: http://www.icl-network.com
 *
 * JavaScript - Borrowing
 * Version: 3.0
 */
$().ready(function() {

	var $borrowingFrom = $("#borrowingFrom"), $submit = $borrowingFrom.find(":submit");
	$submit.prop("disabled", false);
	
		$borrowingFrom.validate({
		rules: {
			amount: {
				required: true,
				digits: true,
				min: 0,
				maxlength: 8
			},
			period:  {
				required: true,
				digits: true,
				min: 0,
				maxlength: 2
			},
			interestRate:  {
				required :true,
				number: true,
				min: 12,
				max: 24
			},
			purpose: {
				required: true,
				rangelength: [2,500] 
			},
			description: {
				required: true,
				rangelength: [2,500] 
			},
			agreement: "required"
		},
		messages: {
			amount: {
				required: "请输入借款金额",
				digits: "请输入正确的借款金额",
				min: "借款金额必须为正数",
				maxlength: "借款金额超出限制"
			},
			period:  {
				required: "请输入借款期限",
				digits: "请输入正确的借款期限",
				min: "借款期限必须为正数",
				maxlength: "借款期限超出限制"
			},
			interestRate:  {
				required: "请输入借款利率",
				number: "请输入正确的借款利率",
				min: "请输入12%-24%的借款利率",
				max: "请输入12%-24%的借款利率"
			},
			purpose: {
				required: "请输入借款用途",
				rangelength: "请输入2-500字的借款用途" 
			},
			description: {
				required: "请输入借款描述",
				rangelength: "请输入2-500字的借款描述" 
			},
			agreement: "请先阅读《借款协议》并确认同意"
		},
		errorPlacement: function(error, element) {
			element.closest("li").find(".form-remark").text(error.text());
		},
		unhighlight: function(element) {
			$(element).closest("li").find(".form-remark").text("");
		},
		submitHandler: function(form) {
			$submit.prop("disabled", true);
			form.submit();
		}
	});

});